<div class="row-fluid hidden-phone" style='height:20px'></div>    
<div class="row-fluid">
  <div class="span10 offset1">
    <div class="row-fluid">
      <div class="span8" >
        <p><img src='/static/img/placeholder_car.jpg' style='max-width:300px'></p>
      </div><div class="span4" >
        <form enctype="multipart/form-data" id='photo_car'>
          <span class="span6 fileUpload button small">
          <span>Upload</span><input name="file" type="file" class="upload" /></span>
          <span class="span5">
          <input type="button" class="button small info" value="Save" id='save_btn'>
          </span>
        </form>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span12">
       <p class="plabel"> {{ makemodel }} </p><br>
       <p class="plabel"> {{ location }} </p>
       </div>
    </div>
    <div class="row hidden-phone" style='height:20px'></div>
    <div class="row-fluid support" style='border: 1px solid #333'>
      <div class="span12">
       <h4>Subscribed Routes</h4>
       <p>You will be alerted when there are requests along your subscribed routes.</p>
      </div>
      <div class="span8 offset2">     
        <div id="map-canvas" class="homemap"></div>
      </div>
    </div>  
  </div>
</div>  
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
<script type="text/javascript" src="/static/js/maps/mapoverlay.js"></script>
<script>    
$(document).ready(function(){
    //fill in some info
    var mapURL = '/route/subs';
    //initialize_map(mapURL);
    $('#save_btn').click(function(){
      console.log('save btn');
      var formData = new FormData($('form#photo_car')[0]);
      $.ajax({
        url: '/drive/photo',  //Server script to process data
        type: 'POST',
        xhr: function() {  // Custom XMLHttpRequest
            var myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // Check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // For handling the progress of the upload
            }
            return myXhr;
        },
        // Form data
        data: formData,
        //Options to tell jQuery not to process data or worry about content-type.
        cache: false,
        contentType: false,
        processData: false
      });
    });    
});

</script>